# ========================================
# Spring Boot 主配置文件
# ========================================

# 项目相关配置
server-config:
  # 项目名称
  name: server
  # 项目版本
  version: 0.0.0
  # 版权年份
  copyrightYear: 9999
  # 文件上传路径（Windows示例：D:/server/uploadPath，Linux示例：/home/server/uploadPath）
  profile: ${server-config.profile}
  # 是否启用IP地址获取功能
  addressEnabled: ${server-config.addressEnabled}
  # 验证码类型（math：数学计算验证码，char：字符验证码）
  captchaType: ${server-config.captchaType}
  # 是否启用文件项目根目录化
  pathRoot: ${server-config.pathRoot}

# 服务器配置
server:
  # HTTP服务端口号
  port: ${server.port}
  servlet:
    # 应用上下文路径
    context-path: /
  tomcat:
    # URI编码格式
    uri-encoding: UTF-8
    # 连接队列最大长度（连接数满后的排队数）
    accept-count: 1000
    threads:
      # 最大工作线程数
      max: 800
      # 最小空闲线程数
      min-spare: 100

# 日志级别配置
logging:
  level:
    # 项目包日志级别（debug：开发环境，info：生产环境）
    com.server: debug
    # MyBatis Mapper接口日志级别，关闭SQL日志打印
    com.server.mapper: warn
    # Spring框架日志级别
    org.springframework: warn

# 用户安全配置
user:
  password:
    # 密码最大错误尝试次数
    maxRetryCount: ${user.password.maxRetryCount}
    # 密码锁定时间（单位：分钟）
    lockTime: ${user.password.lockTime}

# Spring框架配置
spring:
  # 国际化资源配置
  messages:
    # 国际化资源文件路径
    basename: i18n/messages
  # 激活的配置文件（dev：开发环境，prod：生产环境，druid：数据源配置）
  profiles:
    active: dev,druid
  # 文件上传配置
  servlet:
    multipart:
      # 单个文件最大大小
      max-file-size: 200MB
      # 请求总文件最大大小
      max-request-size: 1000MB
  # Redis缓存配置
  redis:
    # Redis服务器地址
    host: ${redis.host}
    # Redis服务器端口
    port: ${redis.port}
    # Redis数据库索引（0-15）
    database: ${redis.database}
    # Redis访问密码（空则无密码）
    password:
    # Redis连接超时时间
    timeout: ${redis.timeout}
    # Lettuce连接池配置
    lettuce:
      pool:
        # 连接池最小空闲连接数
        min-idle: 0
        # 连接池最大空闲连接数
        max-idle: 8
        # 连接池最大连接数
        max-active: 8
        # 连接池最大阻塞等待时间（-1表示无限制）
        max-wait: -1ms
  # 邮件服务配置
  mail:
    # SMTP邮件服务器地址
    host: ${mail.host}
    # 邮箱账号
    username: ${mail.username}
    # 邮箱授权码（非登录密码）
    password: ${mail.password}
    # 邮件服务器安全配置
    properties:
      mail:
        smtp:
          ssl:
            # 是否启用SSL安全连接
            enable: true
  # RabbitMQ消息队列配置
  rabbitmq:
    # RabbitMQ服务器地址
    host: ${rabbitmq.host}
    # RabbitMQ服务器端口
    port: ${rabbitmq.port}
    # RabbitMQ用户名
    username: ${rabbitmq.username}
    # RabbitMQ密码
    password: ${rabbitmq.password}
    # RabbitMQ模板配置
    template:
      # 接收消息默认超时时间
      default-receive-timeout: ${rabbitmq.timeout}
      # 重试配置
      retry:
        # 是否启用重试
        enabled: true
        # 最大重试次数
        max-attempts: 3
      # 自定义连接工厂配置
      custom-connection-factory:
        # 缓存模式
        cache-mode: CHANNEL
        # 是否启用发布确认
        publisher-confirms: true

# JWT Token配置
token:
  # Token在请求头中的字段名
  header: ${token.header}
  # Token加密密钥（建议使用复杂字符串）
  secret: ${token.secret}
  # Token有效期（单位：分钟）
  expireTime: ${token.expireTime}

# MyBatis持久层框架配置
mybatis:
  # 实体类包别名（扫描指定包下的实体类）
  typeAliasesPackage: com.server.**.domain
  # Mapper XML文件扫描路径
  mapperLocations: classpath*:mapper/**/*Mapper.xml
  # MyBatis全局配置文件路径
  configLocation: classpath:mybatis/mybatis-config.xml

# MyBatis-Plus增强框架配置
mybatis-plus:
  # Mapper XML文件扫描路径
  mapperLocations: classpath*:mapper/**/*Mapper.xml
  # MyBatis配置
  configuration:
    # SQL日志实现类（已关闭控制台输出，使用slf4j日志框架）
    # log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    # 是否开启驼峰命名转换（下划线转驼峰）
    map-underscore-to-camel-case: true
  # 全局配置
  global-config:
    # 数据库配置
    db-config:
      # 主键生成策略（none：手动指定）
      id-type: none

# PageHelper分页插件配置
pagehelper:
  # 数据库方言（mysql/oracle/postgresql等）
  helperDialect: mysql
  # 是否支持通过方法参数传递分页参数
  supportMethodsArguments: true
  # 分页参数名称映射
  params: count=countSql

# Swagger API文档配置
swagger:
  # 是否启用Swagger文档（生产环境建议关闭）
  enabled: ${swagger.enabled}
  # API文档访问路径前缀
  pathMapping: ${swagger.pathMapping}

# XSS跨站脚本攻击防护配置
xss:
  # 是否启用XSS过滤
  enabled: true
  # 排除过滤的URL路径（多个用逗号分隔）
  excludes: /system/notice
  # 需要过滤的URL路径模式
  urlPatterns: /system/*,/monitor/*,/tool/*

# 溯源系统地址配置
codepath:
  # 溯源查询页面URL路径
  path: ${codepath.path}

# 实时模型单机控制配置
online:
  # 是否启用实时模型单机控制功能
  enabled: ${online.enabled}

# IoT物联网数据采集配置
iot:
  # 是否启用IoT数据采集功能
  enabled: ${iot.enabled}

