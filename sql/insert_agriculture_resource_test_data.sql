-- 清空表数据（保留表结构）
-- 由于存在外键约束，需要先禁用外键检查
SET FOREIGN_KEY_CHECKS = 0;

-- 按顺序删除数据（先删除子表，再删除父表）
DELETE FROM `agriculture_resource_usage`;
DELETE FROM `agriculture_resource_inventory`;
DELETE FROM `agriculture_resource`;

-- 重置自增ID
ALTER TABLE `agriculture_resource` AUTO_INCREMENT = 1;
ALTER TABLE `agriculture_resource_inventory` AUTO_INCREMENT = 1;
ALTER TABLE `agriculture_resource_usage` AUTO_INCREMENT = 1;

-- 重新启用外键检查
SET FOREIGN_KEY_CHECKS = 1;

-- 农资资源表测试数据
-- 使用真实用户ID：1=admin(超级管理员), 9=物资管理部主管
INSERT INTO `agriculture_resource` (`resource_code`, `resource_name`, `resource_type`, `resource_image`, `measure_unit`, `remark`, `order_num`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`) VALUES
('RES001', '复合肥料', '0', NULL, 'kg', '适用于多种作物的复合肥料', 1, '9', NOW(), '9', NOW(), '0'),
('RES002', '有机肥料', '0', NULL, 'kg', '有机质含量高的有机肥料', 2, '9', NOW(), '9', NOW(), '0'),
('RES003', '杀虫剂', '0', NULL, 'L', '高效低毒杀虫剂', 3, '9', NOW(), '9', NOW(), '0'),
('RES004', '除草剂', '0', NULL, 'L', '选择性除草剂', 4, '9', NOW(), '9', NOW(), '0'),
('RES005', '种子', '0', NULL, 'kg', '优质蔬菜种子', 5, '9', NOW(), '9', NOW(), '0'),
('RES006', '地膜', '0', NULL, 'm²', '黑色地膜，保温保湿', 6, '9', NOW(), '9', NOW(), '0'),
('RES007', '滴灌管', '0', NULL, 'm', 'PE材质滴灌管', 7, '9', NOW(), '9', NOW(), '0'),
('RES008', '育苗盘', '0', NULL, '个', '72孔育苗盘', 8, '9', NOW(), '9', NOW(), '0'),
('MACH001', '旋耕机', '1', NULL, '台', '小型旋耕机，适用于温室作业', 1, '9', NOW(), '9', NOW(), '0'),
('MACH002', '播种机', '1', NULL, '台', '精量播种机', 2, '9', NOW(), '9', NOW(), '0'),
('MACH003', '喷雾机', '1', NULL, '台', '电动喷雾机，用于喷洒农药', 3, '9', NOW(), '9', NOW(), '0'),
('MACH004', '收割机', '1', NULL, '台', '小型收割机', 4, '9', NOW(), '9', NOW(), '0'),
('MACH005', '拖拉机', '1', NULL, '台', '小型农用拖拉机', 5, '9', NOW(), '9', NOW(), '0');

-- 农资库存表测试数据
-- 使用真实用户ID：9=物资管理部主管, 10=物资管理部员工1
INSERT INTO `agriculture_resource_inventory` (`resource_id`, `current_stock`, `min_stock`, `max_stock`, `remark`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`) VALUES
(1, 5000.00, 500.00, 10000.00, '复合肥料库存', '9', NOW(), '9', NOW(), '0'),
(2, 3000.00, 300.00, 6000.00, '有机肥料库存', '9', NOW(), '9', NOW(), '0'),
(3, 200.00, 20.00, 500.00, '杀虫剂库存', '9', NOW(), '9', NOW(), '0'),
(4, 150.00, 15.00, 400.00, '除草剂库存', '9', NOW(), '9', NOW(), '0'),
(5, 1000.00, 100.00, 2000.00, '种子库存', '9', NOW(), '9', NOW(), '0'),
(6, 5000.00, 500.00, 10000.00, '地膜库存', '9', NOW(), '9', NOW(), '0'),
(7, 10000.00, 1000.00, 20000.00, '滴灌管库存', '9', NOW(), '9', NOW(), '0'),
(8, 500.00, 50.00, 1000.00, '育苗盘库存', '9', NOW(), '9', NOW(), '0'),
(9, 2.00, 1.00, 5.00, '旋耕机库存', '9', NOW(), '9', NOW(), '0'),
(10, 1.00, 1.00, 3.00, '播种机库存', '9', NOW(), '9', NOW(), '0'),
(11, 3.00, 1.00, 5.00, '喷雾机库存', '9', NOW(), '9', NOW(), '0'),
(12, 1.00, 1.00, 2.00, '收割机库存', '9', NOW(), '9', NOW(), '0'),
(13, 2.00, 1.00, 3.00, '拖拉机库存', '9', NOW(), '9', NOW(), '0');

-- 农资使用记录表测试数据（使用真实的批次ID、任务ID和用户信息）
-- 批次14: 任务28(测试番茄,负责人:超级管理员), 任务29(测试西红柿,负责人:超级管理员)
-- 批次15: 任务30(测试番茄,负责人:超级管理员), 任务31(测试西红柿,负责人:超级管理员)
-- 批次18: 任务36(测试,负责人:超级管理员)
-- 用户ID说明：
--   1=超级管理员(admin)
--   3=种植管理部主管
--   4=种植管理部员工1
--   5=种植管理部员工2
--   9=物资管理部主管
--   10=物资管理部员工1
--   11=物资管理部员工2
-- operator字段：使用用户昵称，可以从sys_user表的nick_name字段获取

INSERT INTO `agriculture_resource_usage` (`resource_id`, `batch_id`, `task_id`, `usage_quantity`, `measure_unit`, `usage_date`, `usage_type`, `operator`, `remark`, `status`, `order_num`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`) VALUES
-- 批次14的使用记录（由种植管理部员工操作，create_by使用用户ID）
(1, 14, 28, 100.00, 'kg', '2025-01-15 08:00:00', '1', '种植管理部员工', '批次14-测试番茄任务施肥使用', '0', 1, '4', NOW(), '4', NOW(), '0'),
(2, 14, 28, 50.00, 'kg', '2025-01-15 08:30:00', '1', '种植管理部员工', '批次14-测试番茄任务有机肥使用', '0', 2, '4', NOW(), '4', NOW(), '0'),
(3, 14, 29, 5.00, 'L', '2025-01-20 09:00:00', '1', '种植管理部员工', '批次14-测试西红柿任务杀虫使用', '0', 3, '5', NOW(), '5', NOW(), '0'),
(5, 14, NULL, 20.00, 'kg', '2025-01-10 10:00:00', '0', '种植管理部员工', '批次14种子领用', '0', 4, '4', NOW(), '4', NOW(), '0'),
(9, 14, 28, 1.00, '台', '2025-01-18 08:00:00', '1', '种植管理部员工', '批次14-测试番茄任务旋耕机使用', '0', 5, '4', NOW(), '4', NOW(), '0'),
(11, 14, 29, 1.00, '台', '2025-01-20 10:00:00', '1', '种植管理部员工', '批次14-测试西红柿任务喷雾机使用', '0', 6, '5', NOW(), '5', NOW(), '0'),

-- 批次15的使用记录（由种植管理部员工操作）
(1, 15, 30, 150.00, 'kg', '2025-01-16 08:00:00', '1', '种植管理部员工', '批次15-测试番茄任务复合肥料使用', '0', 7, '4', NOW(), '4', NOW(), '0'),
(3, 15, 31, 8.00, 'L', '2025-01-25 09:00:00', '1', '种植管理部员工', '批次15-测试西红柿任务杀虫剂使用', '0', 8, '5', NOW(), '5', NOW(), '0'),
(6, 15, 30, 200.00, 'm²', '2025-01-12 14:00:00', '1', '种植管理部员工', '批次15-测试番茄任务地膜使用', '0', 9, '4', NOW(), '4', NOW(), '0'),
(7, 15, 30, 500.00, 'm', '2025-01-12 14:30:00', '1', '种植管理部员工', '批次15-测试番茄任务滴灌管使用', '0', 10, '4', NOW(), '4', NOW(), '0'),
(10, 15, 30, 1.00, '台', '2025-01-13 09:00:00', '1', '种植管理部员工', '批次15-测试番茄任务播种机使用', '0', 11, '4', NOW(), '4', NOW(), '0'),

-- 批次18的使用记录（由种植管理部员工操作）
(4, 18, 36, 3.00, 'L', '2025-01-14 15:00:00', '1', '种植管理部员工', '批次18-测试任务除草剂使用', '0', 12, '5', NOW(), '5', NOW(), '0'),
(8, 18, NULL, 50.00, '个', '2025-01-11 11:00:00', '0', '种植管理部员工', '批次18育苗盘领用', '0', 13, '4', NOW(), '4', NOW(), '0'),

-- 入库记录（由物资管理部员工操作，不关联批次和任务）
(2, NULL, NULL, 30.00, 'kg', '2025-01-08 10:00:00', '2', '物资管理部员工', '仓库补货入库', '0', 14, '10', NOW(), '10', NOW(), '0'),
(5, NULL, NULL, 10.00, 'kg', '2025-01-09 11:00:00', '2', '物资管理部员工', '备用种子入库', '0', 15, '10', NOW(), '10', NOW(), '0'),
(1, NULL, NULL, 200.00, 'kg', '2025-01-07 09:00:00', '2', '物资管理部主管', '复合肥料采购入库', '0', 16, '9', NOW(), '9', NOW(), '0'),
(3, NULL, NULL, 50.00, 'L', '2025-01-06 14:00:00', '2', '物资管理部主管', '杀虫剂采购入库', '0', 17, '9', NOW(), '9', NOW(), '0');
